<!DOCTYPE html>
<html>
<head>
<title>Online Library</title>
<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(to right,#0f2027,#203a43,#2c5364);
  min-height:100vh;
}
header{
  background:#0a3d62;
  color:white;
  text-align:center;
  padding:18px;
}
nav{
  text-align:center;
  background:#1e5f74;
  padding:12px;
}
nav button{
  padding:8px 14px;
  margin:5px;
  border:none;
  border-radius:18px;
  background:#74b9ff;
  color:#003049;
  font-weight:bold;
  cursor:pointer;
}
nav button:hover{
  background:#0984e3;
  color:white;
}
.group{
  background:white;
  width:88%;
  max-width:650px;
  margin:25px auto;
  padding:20px;
  border-radius:15px;
  box-shadow:0 0 15px rgba(0,0,0,0.3);
}
.home-bg{
  background:url('laptoplibrary.jpg');
  background-size:cover;
  background-position:center;
  height:calc(100vh - 120px);
  width:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  color:white;
  text-align:center;
  margin-top:120px
}
.book{
  display:flex;
  gap:15px;
  margin-top:15px;
  padding:12px;
  border-radius:12px;
  background:#ecf6ff;
}
.book img{
  width:90px;
  height:120px;
  border-radius:8px;
}
input,select,textarea{
  width:100%;
  padding:7px;
  margin:5px 0 10px;
  border-radius:8px;
  border:1px solid #3498db;
  font-size:14px;
}
button.action{
  background:#0984e3;
  color:white;
  padding:8px 16px;
  border:none;
  border-radius:18px;
  cursor:pointer;
}
.statusA{color:green;font-weight:bold;}
.statusB{color:red;font-weight:bold;}
</style>
</head>

<body>

<header>
<h1>📘 Online Library Management System</h1>
</header>

<nav>
<button onclick="home()">Home</button>
<button onclick="about()">About</button>
<button onclick="searchBook()">Search Book</button>
<button onclick="membership()">Membership</button>
<button onclick="borrow()">Borrow Book</button>
<button onclick="ret()">Return Book</button>
<button onclick="contact()">Contact Us</button>
<button onclick="feedback()">Feedback</button>
<button onclick="logout()">Logout</button>
</nav>

<div id="content" class="group home-bg">
<h2>Welcome 👋</h2>
<p>Search, Borrow & Return books easily</p>
</div>

<script>
const content=document.getElementById("content");

/* 📚 BOOK DATA – MANY BOOKS ADDED */
var books=[
{id:1,name:"Java Programming",author:"Herbert Schildt",year:2021,photo:"https://images.unsplash.com/photo-1512820790803-83ca734da794",available:true},
{id:2,name:"Python Basics",author:"Mark Lutz",year:2020,photo:"ranaah.jpeg",available:true},
{id:3,name:"C# Essentials",author:"Andrew Troelsen",year:2019,photo:"book.jpeg",available:false},
{id:4,name:"HTML & CSS Guide",author:"Jon Duckett",year:2022,photo:"htmlbook.jpg",available:true},
{id:5,name:"JavaScript Fundamentals",author:"Douglas Crockford",year:2021,photo:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f",available:true},
{id:6,name:"Data Structures in C",author:"Robert Lafore",year:2020,photo:"datastructurebook.jpg",available:true},
{id:7,name:"Algorithms",author:"Thomas Cormen",year:2022,photo:"https://images.unsplash.com/photo-1555066931-4365d14bab8c",available:true},
{id:8,name:"Database Systems",author:"Raghu Ramakrishnan",year:2019,photo:"databasebook.jpg",available:true},
{id:9,name:"Operating Systems",author:"Silberschatz",year:2021,photo:"https://images.unsplash.com/photo-1521791136064-7986c2920216",available:false},
{id:10,name:"Computer Networks",author:"Andrew Tanenbaum",year:2020,photo:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2",available:true},
{id:11,name:"Software Engineering",author:"Ian Sommerville",year:2021,photo:"https://images.unsplash.com/photo-1515378791036-0648a3ef77b2",available:true},
{id:12,name:"Web Development",author:"David Flanagan",year:2022,photo:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f",available:true},
{id:13,name:"Artificial Intelligence",author:"Stuart Russell",year:2022,photo:"https://images.unsplash.com/photo-1504384308090-c894fdcc538d",available:false},
{id:14,name:"Machine Learning",author:"Andrew Ng",year:2023,photo:"machinebook.jpg",available:true},
{id:15,name:"Cyber Security",author:"William Stallings",year:2021,photo:"cyberbook.jpg",available:true},
{id:16,name:"Cloud Computing",author:"Rajkumar Buyya",year:2020,photo:"https://images.unsplash.com/photo-1504384308090-c894fdcc538d",available:true},
{id:17,name:"Mobile App Development",author:"Paul Deitel",year:2022,photo:"https://images.unsplash.com/photo-1517433456452-f9633a875f6f",available:true},
{id:18,name:"Internet of Things",author:"Arshdeep Bahga",year:2021,photo:"https://images.unsplash.com/photo-1518770660439-4636190af475",available:false},
{id:19,name:"Big Data Analytics",author:"Viktor Mayer",year:2020,photo:"https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7",available:true},
{id:20,name:"Digital Logic Design",author:"Morris Mano",year:2019,photo:"https://images.unsplash.com/photo-1555949963-aa79dcee981c",available:true}
];


var members=[];
var borrowRecords=[];

const membershipFee={ Regular:500, Premium:1000 };

/* HOME */
function home(){
  content.className="group home-bg";
  content.innerHTML="<h2>Welcome 👋</h2><p>Online Library Management System</p>";
}

/* ABOUT */
function about(){
  content.className="group";
  content.innerHTML="<h2>About Us</h2><p>Search, borrow, return books with membership and late fine payment.</p>";
}

/* SEARCH */
function searchBook(){
  content.className="group";
  content.innerHTML=`
  <h2>Search Books</h2>
  <input id="searchInput" onkeyup="filterBooks()" placeholder="Search book">
  <div id="bookList"></div>`;
  showBooks(books);
}
function showBooks(list){
  document.getElementById("bookList").innerHTML=list.map(b=>`
  <div class="book">
    <img src="${b.photo}">
    <div>
      <b>${b.name}</b><br>
      Author: ${b.author}<br>
      Year: (${b.year})<br>
      <span class="${b.available?'statusA':'statusB'}">${b.available?'Available':'Borrowed'}</span><br>
    </div>
  </div>`).join("");
}
function filterBooks(){
  let k=searchInput.value.toLowerCase();
  showBooks(books.filter(b=>b.name.toLowerCase().includes(k)));
}

/* ---------- MEMBERSHIP ---------- */
function membership(){
  content.className="group";
  let mid="M"+(members.length+1).toString().padStart(3,"0");
  content.innerHTML=`
  <h2>Membership Registration</h2>
  <label>Member ID</label>
  <input value="${mid}" disabled>
  <input id="mname" placeholder="Full Name">
  <input id="memail" type="email" placeholder="Email">
  <input id="mphone" placeholder="Phone">
  <select id="mtype">
    <option value="">Select Membership</option>
    <option value="Regular">Regular (Rs.500)</option>
    <option value="Premium">Premium (Rs.1000)</option>
  </select>
  <button class="action" onclick="membershipPayment()">Register & Pay</button>
  `;
}

/* ---------- MEMBERSHIP PAYMENT ---------- */
function membershipPayment(){
  const name=mname.value;
  const email=memail.value;
  const phone=mphone.value;
  const type=mtype.value;

  if(!name||!email||!phone||!type){
    alert("Fill all fields");return;
  }

  let fee=membershipFee[type];

  content.className="group";
  content.innerHTML=`
  <h2>Membership Payment</h2>
  <p><b>Name:</b> ${name}</p>
  <p><b>Type:</b> ${type}</p>
  <p><b>Amount:</b> Rs.${fee}</p>

  <input id="bankName" placeholder="Bank Name">
  <input id="bankBranch" placeholder="Bank Branch">
  <input id="accName" placeholder="Account Holder Name">
  <input id="accNo" placeholder="Account Number">

  <button class="action"
   onclick="confirmMembership('${name}','${email}','${phone}','${type}',${fee})">
   Pay & Continue
  </button>`;
}

function confirmMembership(name,email,phone,type,fee){
  if(!bankName.value||!bankBranch.value||!accName.value||!accNo.value){
    alert("Fill all bank details");return;
  }

  let mid="M"+(members.length+1).toString().padStart(3,"0");
  members.push({mid,name,email,phone,type});

  alert("Membership Payment Rs."+fee+" Successful ✅\nMember ID: "+mid);
  borrow();
}

/* ---------- BORROW ---------- */
function borrow(){
  if(members.length==0){
    alert("Please register membership first");
    membership();return;
  }

  content.className="group";

  let memOpt=members.map(m=>`<option value="${m.mid}">${m.name} (${m.mid})</option>`).join("");
  let bookOpt=books.filter(b=>b.available).map(b=>`<option value="${b.id}">${b.name}</option>`).join("");

  let today=new Date().toISOString().split("T")[0];
  let due=new Date();due.setDate(due.getDate()+7);
  due=due.toISOString().split("T")[0];

  content.innerHTML=`
  <h2>Borrow Book</h2>
  <select id="mid"><option value="">Select Member</option>${memOpt}</select>
  <select id="bid"><option value="">Select Book</option>${bookOpt}</select>
  <input type="date" id="bdate" value="${today}">
  <input type="date" id="ddate" value="${due}">
  <button class="action" onclick="borrowNow()">Borrow</button>
  <div id="msg"></div>`;
}

function borrowNow(){
  if(!mid.value||!bid.value){alert("Select member & book");return;}
  let member=members.find(m=>m.mid==mid.value);
  let book=books.find(b=>b.id==bid.value);
  book.available=false;

  borrowRecords.push({
    uname:member.name,
    uid:member.mid,
    book:book.name,
    bdate:bdate.value,
    ddate:ddate.value
  });

  msg.innerHTML="<span class='statusA'>Book Borrowed Successfully ✅</span>";
}

/* ---------- RETURN ---------- */
function ret(){
  content.className="group";
  if(borrowRecords.length==0){content.innerHTML="<h2>No books to return</h2>";return;}
  let opt=borrowRecords.map((r,i)=>`<option value="${i}">${r.book} - ${r.uname}</option>`).join("");
  content.innerHTML=`
  <h2>Return Book</h2>
  <select id="rid" onchange="showDetails()"><option value="">Select</option>${opt}</select>
  <div id="details"></div>
  <label>Return Date</label><input type="date" id="rdate">
  <button class="action" onclick="returnNow()">Return</button>`;
}
function showDetails(){
  const rid=document.getElementById("rid");
  const details=document.getElementById("details");
  if(rid.value===""){details.innerHTML="";return;}
  let r=borrowRecords[rid.value];
  details.innerHTML=`User: ${r.uname}<br>Book: ${r.book}<br>Due Date: ${r.ddate}`;
}
function returnNow(){
  const rid=document.getElementById("rid");
  const rdate=document.getElementById("rdate");
  if(!rdate.value){alert("Select return date");return;}
  let r=borrowRecords[rid.value];
  let due=new Date(r.ddate);
  let retDate=new Date(rdate.value);
  let late=Math.max(0,Math.floor((retDate-due)/(1000*60*60*24)));
  let bookObj=books.find(b=>b.name==r.book);
  bookObj.available=true;
  borrowRecords.splice(rid.value,1);
  showPayment(r.uname,r.book,late*50);
}

/* ---------- PAYMENT ---------- */
function showPayment(user,book,fine){
  let total=fine;
  content.className="group";
  content.innerHTML=`
  <h2>Fine & Payment</h2>
  User: ${user}<br>
  Book: ${book}<br>
  Late Fine: Rs.${fine}<br>
  <b>Total Amount: Rs.${total}</b>

  <h3>Bank Details</h3>
  <input id="bankName" placeholder="Bank Name">
  <input id="bankBranch" placeholder="Bank Branch">
  <input id="accName" placeholder="Account Holder Name">
  <input id="accNo" placeholder="Account Number">
  <button class="action" onclick="payNow(${total})">Pay</button>`;
}
function payNow(total){
  const bankName=document.getElementById("bankName").value;
  const bankBranch=document.getElementById("bankBranch").value;
  const accName=document.getElementById("accName").value;
  const accNo=document.getElementById("accNo").value;

  if(!bankName||!bankBranch||!accName||!accNo){
    alert("Fill all bank details");return;
  }
  alert("Payment Rs."+total+" Successful ✅");
  home();
}


/* ---------- CONTACT US ---------- */
function contact(){
  content.className="group";
  content.innerHTML=`
  <h2>Contact Us</h2>
  <p><b>Email:</b> onlinelibrary@gmail.com</p>
  <p><b>Phone:</b> +94 77 123 4567</p>
  <p><b>Address:</b> Main Street, Sammanthurai</p>
  <hr>
  <h3>Send Message</h3>
  <input id="cname" placeholder="Your Name">
  <input id="cemail" type="email" placeholder="Your Email">
  <textarea id="cmsg" rows="4" placeholder="Your Message"></textarea>
  <button class="action" onclick="sendMessage()">Send Message</button>
  `;
}
function sendMessage(){
  const name=document.getElementById("cname").value;
  const email=document.getElementById("cemail").value;
  const msg=document.getElementById("cmsg").value;

  if(!name||!email||!msg){
    alert("Please fill all fields");return;
  }
  alert("Message sent successfully 👍");
  home();
}

/* ---------- FEEDBACK ---------- */
function feedback(){
  let fb=prompt("Your feedback:");
  if(fb) alert("Thank you for your feedback 😊");
  home();
}

/* ---------- LOGOUT ---------- */
function logout(){
  if(confirm("Do you want to logout?")) location.reload();
}
</script>

</body>
</html>